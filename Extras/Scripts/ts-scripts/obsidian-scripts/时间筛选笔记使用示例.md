# 时间筛选笔记脚本使用示例

## 脚本功能

这个脚本可以根据时间范围筛选 Obsidian 笔记，支持：
- 按创建时间筛选
- 按修改时间筛选
- 同时筛选创建和修改时间
- 指定目录路径进行进一步筛选
- 生成详细的筛选报告

## 快速使用

### 1. 筛选最近7天修改的文件
```bash
obsidian://CodeScriptToolkit?module=/Extras/Scripts/ts-scripts/obsidian-scripts/时间筛选笔记.ts&args=<七天前时间戳>
```

在浏览器控制台计算时间戳：
```javascript
const sevenDaysAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
console.log(sevenDaysAgo); // 复制这个数字
```

### 2. 筛选特定目录的文件
```bash
obsidian://CodeScriptToolkit?module=/Extras/Scripts/ts-scripts/obsidian-scripts/时间筛选笔记.ts&args=<时间戳>,,'Cards','created'
```

### 3. 筛选特定时间范围
```javascript
const startTime = new Date('2025-01-01').getTime();
const endTime = new Date('2025-01-31').getTime();

// 生成URL
`obsidian://CodeScriptToolkit?module=/Extras/Scripts/ts-scripts/obsidian-scripts/时间筛选笔记.ts&args=${startTime},${endTime}`
```

## 实际使用场景

### 场景1：查看今天创建的笔记
```javascript
const today = new Date();
today.setHours(0, 0, 0, 0);
const todayTimestamp = today.getTime();

`obsidian://CodeScriptToolkit?module=/Extras/Scripts/ts-scripts/obsidian-scripts/时间筛选笔记.ts&args=${todayTimestamp},,'','created'`
```

### 场景2：查看最近24小时修改的笔记
```javascript
const last24h = Date.now() - (24 * 60 * 60 * 1000);

`obsidian://CodeScriptToolkit?module=/Extras/Scripts/ts-scripts/obsidian-scripts/时间筛选笔记.ts&args=${last24h},,'','modified'`
```

### 场景3：查看特定项目目录的新增内容
```javascript
const lastWeek = Date.now() - (7 * 24 * 60 * 60 * 1000);

`obsidian://CodeScriptToolkit?module=/Extras/Scripts/ts-scripts/obsidian-scripts/时间筛选笔记.ts&args=${lastWeek},,'Spaces/0-Project','both'`
```

## 参数说明

| 参数位置 | 参数名 | 类型 | 说明 |
|----------|--------|------|------|
| 1 | startTimestamp | number | 起始时间戳（毫秒） |
| 2 | endTimestamp | number | 截止时间戳（毫秒） |
| 3 | directoryPath | string | 目录路径（如 'Cards'） |
| 4 | filterType | string | 筛选类型：'created'/'modified'/'both' |

## 常用时间戳计算

```javascript
// 获取当前时间戳
const now = Date.now();

// 计算常用时间间隔
const oneHour = 60 * 60 * 1000;
const oneDay = 24 * 60 * 60 * 1000;
const oneWeek = 7 * 24 * 60 * 60 * 1000;
const oneMonth = 30 * 24 * 60 * 60 * 1000;

// 常用时间点
const lastHour = now - oneHour;
const last24h = now - oneDay;
const lastWeek = now - oneWeek;
const lastMonth = now - oneMonth;

// 今天开始时间
const today = new Date();
today.setHours(0, 0, 0, 0);
const todayStart = today.getTime();

// 本周开始时间
const thisWeek = new Date();
thisWeek.setDate(thisWeek.getDate() - thisWeek.getDay());
thisWeek.setHours(0, 0, 0, 0);
const weekStart = thisWeek.getTime();

// 本月开始时间
const thisMonth = new Date();
thisMonth.setDate(1);
thisMonth.setHours(0, 0, 0, 0);
const monthStart = thisMonth.getTime();
```

## 在 Obsidian 中使用

1. 复制生成的 URL
2. 在浏览器中打开该 URL
3. Obsidian 会自动执行脚本
4. 查看生成的筛选报告

## 注意事项

- 时间戳单位为毫秒
- 目录路径不需要包含 `/` 前缀
- 如果不指定时间范围，默认筛选最近7天
- 筛选类型默认为 'both'（创建或修改时间）

